<apex:page standardController="User" recordSetVar="users" extensions="UserListExtension">
<apex:pagemessages ></apex:pagemessages>
 <apex:form >
 <apex:pageblock >
  <apex:pageblockButtons rendered="{! not(updated) }">
    <apex:commandButton value="ユーザ名の更新" action="{!usernameUpdate}"/>
  </apex:pageblockButtons>
  <apex:pageblocksection columns="1" >
   <apex:pageblockTable value="{!users}" var="u">
    <apex:column headerValue="写真" >
     <apex:image url="{!u.smallphotourl}"/>
    </apex:column>
    <apex:column value="{!u.userrole.name}"/>
    <apex:column value="{!u.username}"/>
    <apex:column value="{!u.lastname}"/>
    <apex:column value="{!u.firstname}"/>
    <apex:column value="{!u.profile.name}"/>
   </apex:pageblockTable>
  </apex:pageblocksection>
 </apex:pageblock>
 </apex:form>

</apex:page>